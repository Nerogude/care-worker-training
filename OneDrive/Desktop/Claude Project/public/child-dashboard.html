<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Habits - My Tasks</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🎮 My Happy Habits</div>
            <div class="user-info">
                <span id="child-name">Hey there!</span>
                <button class="btn btn-secondary" onclick="logout()">Switch Kid</button>
            </div>
        </div>

        <!-- Child Stats Card -->
        <div class="card" style="background: linear-gradient(135deg, #ff9a9e, #fecfef); color: white;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 id="welcome-message" style="margin-bottom: 10px;">Welcome back!</h2>
                    <p style="opacity: 0.9;">Let's complete some tasks today!</p>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 10px;">🏆</div>
                    <div id="child-stats" class="child-stats">
                        <div class="stat">
                            <div class="stat-number" id="balance">0</div>
                            <div class="stat-label">COINS</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number" id="streak">0</div>
                            <div class="stat-label">STREAK</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Today's Tasks -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">📋 Today's Tasks</h2>
                <button class="btn btn-primary" onclick="refreshTasks()">🔄 Refresh</button>
            </div>
            <div id="tasks-content" class="loading">Loading your awesome tasks...</div>
        </div>

        <!-- Completed Tasks Today -->
        <div class="card" id="completed-section" style="display: none;">
            <div class="card-header">
                <h2 class="card-title">✅ Completed Today</h2>
            </div>
            <div id="completed-content"></div>
        </div>
        
        <!-- Reward Store -->
        <div class="card" style="background: linear-gradient(135deg, #fd79a8, #fdcb6e); color: white;">
            <div class="card-header" style="border-color: rgba(255, 255, 255, 0.2);">
                <h2 class="card-title">🏪 Reward Store</h2>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <button class="btn" style="background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid rgba(255, 255, 255, 0.3);" onclick="refreshStore()">🔄 Refresh</button>
                    <button class="btn" style="background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid rgba(255, 255, 255, 0.3);" onclick="showMyPurchases()">📦 My Orders</button>
                </div>
            </div>
            <div id="store-content" class="loading" style="color: white;">Loading awesome rewards...</div>
        </div>
        
        <!-- My Purchases -->
        <div class="card" id="purchases-section" style="display: none;">
            <div class="card-header">
                <h2 class="card-title">📦 My Purchases</h2>
                <button class="btn btn-secondary" onclick="hidePurchases()">← Back to Store</button>
            </div>
            <div id="purchases-content" class="loading">Loading...</div>
        </div>
    </div>

    <!-- Photo Upload Modal -->
    <div id="photo-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>📸 Add Photo Proof (Optional)</h3>
                <button class="close" onclick="closePhotoModal()">&times;</button>
            </div>
            <form id="photo-form">
                <div class="form-group">
                    <label for="task-photo">Take a photo to show you completed the task!</label>
                    <input type="file" id="task-photo" accept="image/*" capture="camera" class="form-control">
                    <small style="color: #636e72; margin-top: 5px; display: block;">
                        📱 Tip: You can take a photo with your camera or choose from your photos
                    </small>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="submitWithoutPhoto()" style="flex: 1;">
                        Skip Photo
                    </button>
                    <button type="submit" class="btn btn-success" style="flex: 1;">
                        📸 Submit with Photo
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Celebration Modal -->
    <div id="celebration-modal" class="modal">
        <div class="modal-content" style="text-align: center; background: linear-gradient(135deg, #fdcb6e, #e17055);">
            <div style="font-size: 80px; margin: 20px 0;">🎉</div>
            <h2 style="color: white; margin-bottom: 20px;">Awesome Job!</h2>
            <p style="color: white; font-size: 18px; margin-bottom: 30px;" id="celebration-message">
                Task submitted! Your parent will review it soon.
            </p>
            <button class="btn btn-primary" onclick="closeCelebrationModal()" style="background: white; color: #e17055;">
                Keep Going! 💪
            </button>
        </div>
    </div>

    <script src="/js/child-dashboard.js"></script>
</body>
</html>